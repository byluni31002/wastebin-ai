<!doctype html>
<html>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js"></script>
<script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>

<head>
    <script>
        async function loadModel() {
            model = undefined;
            model = await tf.loadLayersModel("https://gitlab.com/SmartLoadCarrier/waste-bin-ai/-/blob/166b988ddde4359df075253f2401673a0b32184c/klassifizierungs-KI/model.json");
            console.log("model loaded")
        }

        function string2array(str) {
            var help = str.split(',');
            output = [];
            output.add(help);
            return output;
        }

        loadModel();

        function make_prediction() {
            var num, output;
            num = Number(document.getElementById("echodump").value);
            input_xs = tf.tensor2d([[string2array(number)]]);
            output = model.predict(input_xs);
            const outputData = output.dataSync();
            document.getElementById("answer").value = Number(outputData[0]);
        }
    </script>
</head>

<body>
<center>
    <p>Echo Dump Prediction</p>
    <br>
    Enter a Echo dump: <input id="echodump"
                              value="5,23,89,152,195,222,240,255,255,255,255,255,255,255,255,234,209,183,154,122,93,73,59,48,39,33,28,23,18,13,9,7,6,5,3,3,2,2,2,2,2,2,2,1,1,1,2,2,2,2,3,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,3,2,3,3,3,3,3,2,3,3,4,4,4,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5,5,5,5,7,7,8,8,8,8,8,9,8,8,8,9,10,10,8,9,10,10,8,9,10,11,11,9,8,8,9,9,8,8">
    <br><br>
    <button onclick="make_prediction()">Prediction</button>
    <br> <br>
    <input id="answer"></center>
<br> <br>
</body>

</html>